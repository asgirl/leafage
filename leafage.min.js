/*\
 *  leafage v0.0.3 by A.S. https://github.com/asgirl/leafage
\*/

!function(){"use strict";var a={author:"A.S.",name:"Leafage",version:"0.0.3",license:"MIT",repository:"https://github.com/asgirl/leafage"},b=window,c=document,d=document.documentElement,e=function(a){return a&&Object.prototype.toString.call(a)===Object.prototype.toString.call({})},f=function(a){return a&&Object.prototype.toString.call(a)===Object.prototype.toString.call([])},g=function(a){return a&&Object.prototype.toString.call(a)===Object.prototype.toString.call(function(){})},h=function(){var a=arguments,b={};if(!a.length)return b;for(var c=0;c<a.length;c++)if(e(a[c]))for(var d in a[c])a[c].hasOwnProperty(d)&&(e(a[c][d])?b[d]=h(b[d]||{},a[c][d]):b[d]=a[c][d]);return b},i=function(a){var b=!a||0===a.length,c=!b&&!a.length,d=[];if(b)return[];if(c)return[a];for(var e=0,f=a.length;f>e;e++)d.push(a[e]);return d},j=function(a,b){if(a&&0!==a.length&&b&&0!==b.length){f(a)||(a=[a]),f(b)||(b=b.split(" "));for(var c="",d=0,e=a.length;e>d;d++){c=a[d].className.split(" ")||[];for(var g=0,h=b.length;h>g;g++)-1===c.indexOf(b[g])&&c.push(b[g]);a[d].className=c.join(" ")}}},k=function(a,b){if(a&&0!==a.length&&b&&0!==b.length){f(a)||(a=[a]),f(b)||(b=b.split(" "));for(var c="",d=[],e=0,g=a.length;g>e;e++){c=a[e].className.split(" ")||[];for(var h=0,i=c.length;i>h;h++)-1===b.indexOf(c[h])&&d.push(c[h]);a[e].className=d.join(" ")}}},l=function(a,b){if(!a||a.length||!b||0===b.length)return!1;f(b)||(b=b.split(" "));for(var c=a.className.split(" ")||[],d=0,e=b.length;e>d;d++)if(-1===c.indexOf(b[d]))return!1;return!!b.length},m=function(a,b,c){if(a&&0!==a.length&&b&&0!==b.length&&c){f(a)||(a=[a]),f(b)||(b=b.split(" "));for(var d=window.addEventListener?1:2,e=0,g=a.length;g>e;e++)for(var h=0,i=b.length;i>h;h++)1===d?a[e].addEventListener(b[h],c,!1):a[e].attachEvent("on"+b[h],c)}},n=function(a,b,c){if(a&&0!==a.length&&b&&0!==b.length&&c){f(a)||(a=[a]),f(b)||(b=b.split(" "));for(var d=window.addEventListener?1:2,e=0,g=a.length;g>e;e++)for(var h=0,i=b.length;i>h;h++)1===d?a[e].removeEventListener(b[h],c):a[e].detachEvent("on"+b[h],c)}},o=function(a){a=a||{};var b=new XMLHttpRequest;return b.open(a.method||"get",a.url,a.async||!0,a.username,a.userpass),b},p=function(a,b){if(a&&0!==a.length&&b&&0!==b.length){f(a)||(a=[a]),b instanceof Node&&(b=[b]);for(var c=0,d=a.length;d>c;c++)if(f(b))for(var e=0,g=b.length;g>e;e++)a[c].appendChild(b[e]);else a[c].insertAdjacentHTML("beforeend",b)}},q=function(a){if(a&&0!==a.length){f(a)||(a=[a]);for(var b=0,c=a.length;c>b;b++)a[b].parentNode.removeChild(a[b])}},r=function(a,b){if(a&&0!==a.length&&b&&0!==b.length){f(a)||(a=[a]),b instanceof Node&&(b=[b]);for(var c=0,d=a.length;d>c;c++)if(f(b))for(var e=0,g=b.length;g>e;e++)a[c].parentNode.insertBefore(b[e],a[c]);else a[c].insertAdjacentHTML("beforebegin",b)}},s=function(a){if(a&&0!==a.length){f(a)||(a=[a]);for(var b=[],c=0,d=a.length;d>c;c++){b=a[c].childNodes;for(var e=0,g=b.length;g>e;e++)b[e]&&a[c].removeChild(b[e])}}},t=function(a){return a?c.querySelector(a):null},u=function(a,b){return a&&0!==a.length&&b?a.querySelector(b):null},v=function(a,b){return a&&0!==a.length&&b?i(a.querySelectorAll(b)):null},w=function(a){return a.replace(/[^a-z0-9_\-\.]+/gi,"").replace(/[\-\.]/g,"_")},x=[],y=function(a){var b="abcdefghijklmnopqrstuvwxyz",c=b.length-1,d="";if(!a)return d;for(var e=0;a>e;e++)d+=b[Math.round(Math.random()*c)];return-1!==x.indexOf(d)?y(a):(x.push(d),d)},z=function(a){var b=c.createDocumentFragment(),d=c.createElement("div");d.innerHTML=a;for(var e=v(d,"script"),f=0,g=e.length;g>f;f++)r(e[f],B(e[f]));for(var h=d.childNodes,i=0,j=h.length;j>i;i++)b.appendChild(h[i]);return b},A=function(a){var b=c.createElement("div");b.innerHTML=a;for(var d=v(b,"script"),e=0,f=d.length;f>e;e++)r(d[e],B(d[e]));return i(b.childNodes)},B=function(a){if("script"!==a.nodeName.toLowerCase())return a;var b,c;b=document.createElement("script"),b.innerHTML=a.innerHTML,c=a.attributes;for(var d=0,e=c.length;e>d;d++)b.setAttribute(c[d].nodeName,c[d].nodeValue);return b},C=function(a,b){return a.length?-1!==a.indexOf(b)?b:b="first"===b?a[0]:"last"===b?a[a.length-1]:"number"==typeof b&&b>=0&&b<a.length?a[b]:void 0:void 0},D=function(a,b,c,d){var e,f=function(){n(e,"load",g),n(e,"error",h)},g=function(a){return e.status&&200!==e.status?h():(f(),void(d&&d("success",e,Date.now())))},h=function(a){f(),d&&d("error",a)},i=function(){};switch(b){case"ajax":i=function(a){f(),e.abort(),e=null,d&&d("abort")},c.url=a,e=o(c),m(e,"load",g),m(e,"error",h),e.send();break;case"image":i=function(a){f(),e.src="",e=null,d&&d("abort")},e=document.createElement("img"),m(e,"load",g),m(e,"error",h),e.src=a;break;default:return d&&d("success",null,Date.now()),null}return e.cancel=i,e},E=function(a,b,c,d){if(a&&b&&0!==b.length){f(b)||(b=[b]);for(var e=0;1>e;e++){for(var g=0,h=b.length;h>g;g++)if(l(a,b[g]))return d(!0,a,b[g]);if(l(a,c))return d(!1,a,c);if(!a.parentNode)return d(!1,a);a=a.parentNode,e--}}},F={prefix:"leafage",attr_window:"data-leafage-window",attr_id:"data-leafage-id",attr_url:"data-leafage-url",attr_title:"data-leafage-title",attr_content:"data-leafage-content",attr_type:"data-leafage-type",attr_group:"data-leafage-group",sel_window:"e-window",sel_wrapper:"e-wrapper",sel_title:"e-title",sel_content:"e-content",sel_shut:"e-shut",sel_close:"e-close",sel_prev:"e-prev",sel_next:"e-next",sel_touch:"e-touch",sel_accept:"e-accept",sel_cancel:"e-cancel",sel_current:"e-current",sel_total:"e-total",class_block:"f-pageblock",class_alone:"f-alone",class_enabled:"f-enabled",class_disabled:"f-disabled",class_active:"f-active",class_inactive:"f-inactive",class_open:"f-open",class_close:"f-close",class_show:"f-show",class_hide:"f-hide",class_prev:"f-prev",class_next:"f-next",class_ready:"f-ready",class_load:"f-loading",class_error:"f-error",class_type:"f-type",event_click:"click"},G={general:{success:"Everything okay",error:"Something wrong",txt_prev:"Prev",txt_next:"Next",txt_close:"Close"}},H=function(a,b){return a&&"general"!==a?(a="c_"+w(a),G[a]=h(G.general,b),G[a]):null},I=function(a){return a&&"general"!==a&&(a="c_"+w(a)),G[a]?G[a]:null},J=function(a,b){return"general"!==a&&(a="c_"+w(a)),G[a]||(a="general"),G[a][b]},K=function(){var a=[];for(var b in G)a.push("general"!==b?b.slice(2):b);return a},L={general:{mod:"general",lang:"general",bindto:"body",makeMultiUrl:!0,makeTypeDetect:!0,makeGrouping:!0,makeCombine:!0,makeBlockPage:!0,makeTail:!0,makeLoop:!1,makeCasheReset:!1,makeEventBind:!0,makePrevent:!0,classBody:"",classWindow:"",urlAttr:F.attr_url,titleAttr:F.attr_title,contentAttr:F.attr_content,type:"ajax",typeAttr:F.attr_type,group:"g",groupAttr:F.attr_group,ajaxProperty:{},timeSave:6e4,template:'<div class="leafage e-window e-shut"><button class="leafage-close e-close">{{txt_close}}</button><button class="leafage-prev e-prev">{{txt_prev}}</button><button class="leafage-next e-next">{{txt_next}}</button><div class="leafage-wrapper e-wrapper"><div class="leafage-title e-title"></div><div class="leafage-content e-content"></div><div class="leafage-count"><span class="e-current"></span>/<span class="e-total"></span></div></div><div class="leafage-preloader"></div></div>',onInit:null,onOpen:null,onClose:null,onSet:null,onUnset:null,onAccept:null,onCancel:null}},M=function(a,b){return"general"===a?!1:(a="c_"+w(a),L[a]=h({},b),L[a])},N=function(a,b){return b=b||{},a&&"general"!==a&&(a="c_"+w(a)),a&&"general"!==a?h(L.general,L[a],b):h(L.general,b)},O=function(){var a=[];for(var b in L)a.push("general"!==b?b.slice(2):b);return a},P=[],Q="",R=function(a){return Q=a,P.push(a),!0},S=function(a){for(var b=[],c=0,d=P.length;d>c;c++)a!==P[c]&&b.push(P[c]);return P=b,Q=P.length?P[P.length-1]:"",!0},T=function(){return P},U=0,V={id:"",is_get:!1,is_error:!1,is_active:!1,is_loading:!1,is_bind:!1,timestamp:0,url:"",title:"",content:"",type:"",group:"",node:null,source:null},W={},X=function(a){return a.id=y(16),W[a.id]=h(V,a),W[a.id]},Y=function(a){if(f(a))for(var b=0,c=a.length;c>b;b++)W[a[b]]=null;else W[a]=null},Z=function(a){var b=[];if(f(a)){for(var c=0,d=a.length;d>c;c++)b.push(W[a[c]]);return b}return W[a]},$=function(a,b){if(a.url)if(/^(http(s)?\:)?\/\/(www\.)?(youtu\.be)/i.test(a.url))a.url="//www.youtube.com/embed/"+a.url.match(/([^\/]*)$/)[0],"iframe"!==b&&(a.type="iframe");else if(/^(http(s)?\:)?\/\/(www\.)?(vimeo\.com)/i.test(a.url))a.url="//player.vimeo.com/video/"+a.url.match(/([^\/]*)$/)[0],"iframe"!==b&&(a.type="iframe");else{if(a.type)return;a.content?"html"!==b&&(a.type="html"):/^\w*\#/.test(a.url)?"find"!==b&&(a.type="find"):/\.(bmp|gif|jp(e)?g|png|svg|tif(f)?|webp)(?:\?.*)?$/i.test(a.url)?"image"!==b&&(a.type="image"):/\.(3gp|mp3|mp4|og(g|v)|pdf|wav|webm|wmv)(?:\?.*)?$/i.test(a.url)?"iframe"!==b&&(a.type="iframe"):("find"===b||"html"===b)&&(a.type="ajax")}},_=function(a,b,c){var d=a.type||b.type;if(!a.is_get||a.timestamp&&Date.now()-a.timestamp>b.timeSave)switch(a.is_get=!1,a.is_error=!1,d){case"ajax":case"image":a.source=D(a.url+(b.makeCasheReset?(/(\?.*)$/.test(a.url)?"&":"?")+Date.now():""),d,b.ajaxProperty,function(e,f,g){"success"===e?("ajax"===d?a.content=A(f.responseText):a.content=a.source,a.timestamp=g,a.is_get=!0):"error"===e&&(a.content=J(b.lang,"error"),a.is_error=!0),a.is_loading=!1,c&&c(e)}),a.is_loading=!0;break;case"find":a.content=document.getElementById(a.url.slice(1)),a.source=document.createElement("div"),a.content?a.is_get=!0:(a.content=J(b.lang,"error"),a.is_error=!0);break;case"iframe":a.content=document.createElement("iframe"),a.content.src=a.url,a.content.setAttribute("allowfullscreen",!0),a.is_get=!0;break;case"html":"string"==typeof a.content?a.content=A(a.content):a.content=i(a.content),a.is_get=!0}a.is_loading||c&&c(a.is_error?"error":"success")},aa=function(a,b,c){for(var d,e={},f=[],g=0,h=Math.max(a.length,b.length);h>g;g++){if(b[g]&&(b[g].hasAttribute(c.urlAttr)&&(e.url=b[g].getAttribute(c.urlAttr)),b[g].hasAttribute(c.titleAttr)&&(e.title=b[g].getAttribute(c.titleAttr)),b[g].hasAttribute(c.typeAttr)&&(e.type=b[g].getAttribute(c.typeAttr)),b[g].hasAttribute(c.groupAttr)&&(e.group=b[g].getAttribute(c.groupAttr)),e.node=b[g]),a[g]&&(a[g].url&&(e.url=a[g].url),a[g].title&&(e.title=a[g].title),a[g].content&&(e.content=a[g].content),a[g].type&&(e.type=a[g].type),a[g].group&&(e.group=a[g].group)),e.url&&(e.url=e.url.replace(/(^\s+)|(\s+$)/g,"")),e.group&&(e.group="c_"+w(e.group)),c.makeMultiUrl&&e.url){d=e.url.split(","),delete e.content;for(var i=0,j=d.length;j>i;i++)e.url=d[i].replace(/(^\s+)|(\s+$)/g,""),f.push(X(e)),i||delete e.node}else f.push(X(e));e={}}return f},b={id:"",is_enabled:!0,is_init:!1,is_bind:!1,is_open:!1,is_ready:!1,is_active:!1,is_loading:!1,is_set:!1,is_first:!1,is_last:!1,is_bind:!1,group:"",elements:[],elements_total:0,element_current:"",element_current_index:0,element_pre:"",element_pre_index:0,options:{}},ba={},ca=function(a){return a=a||{},a.id=y(8),ba[a.id]=h(b,a),ba[a.id]},da=function(a){return ba[a]},ea=function(a,b){var c=b.template.replace(/\{\{\s?(\w+)\s?\}\}/g,function(a,c){var d=J(b.lang,c);return d?d:""}),d=z(c);a.node_window=u(d,"."+F.sel_window),a.node_wrapper=u(d,"."+F.sel_wrapper),a.node_title=u(d,"."+F.sel_title),a.node_content=u(d,"."+F.sel_content),a.node_prev=v(d,"."+F.sel_prev),a.node_next=v(d,"."+F.sel_next),a.node_current=v(d,"."+F.sel_current),a.node_total=v(d,"."+F.sel_total),b.bindto instanceof Node?a.node_place=b.bindto:a.node_place=t(b.bindto),b.makeCombine||(a.node_prev&&q(a.node_prev),a.node_next&&q(a.node_next)),j(a.node_window,b.classWindow)},fa=function(a,b){b.makeLoop||(a.is_first?j(a.node_prev,F.class_disabled):k(a.node_prev,F.class_disabled),a.is_last?j(a.node_next,F.class_disabled):k(a.node_next,F.class_disabled))},ga=function(a,b){a.is_open||(b.makeTail&&R(a.id),b.makeBlockPage&&(U||j(d,F.class_block),U++),p(a.node_place,a.node_window),j(a.node_window,F.class_active),j(d,b.classBody),b.onOpen&&b.onOpen(that),a.is_active=!0,a.is_open=!0)},ha=function(a,b){a.is_open&&(b.onClose&&b.onClose(that),b.makeTail&&S(a.id),b.makeBlockPage&&a.is_active&&(U--,U||k(d,F.class_block)),q(a.node_window),k(a.node_window,F.class_active),k(d,b.classBody),a.is_active=!1,a.is_open=!1)},ia=function(a,b){a.is_active||(b.makeTail&&(Q&&Q!==a.id&&ma.create(Q).hide(),Q=a.id),b.makeBlockPage&&(U||j(d,F.class_block),U++),k(a.node_window,F.class_inactive),j(a.node_window,F.class_active),a.is_active=!0)},ja=function(a,b){a.is_active&&(b.makeTail&&(Q=""),b.makeBlockPage&&(U--,U||k(d,F.class_block)),k(a.node_window,F.class_active),j(a.node_window,F.class_inactive),a.is_active=!1)},ka=function(a,b,c){if(!b.is_active){var d=b.type||c.type;b.is_error?(j(a.node_window,F.class_error),j(a.node_title,F.class_disabled)):(j(a.node_window,F.class_type+"_"+d),"find"===d?r(b.content,b.source):"image"===d&&a.node_wrapper&&(a.node_wrapper.style.maxWidth=b.content.naturalWidth+"px",a.node_wrapper.style.maxHeight=b.content.naturalHeight+"px"),b.title?p(a.node_title,b.title):j(a.node_title,F.class_disabled)),p(a.node_content,b.content),p(a.node_current,(a.element_current_index+1).toString()),p(a.node_total,a.elements_total.toString()),1===a.elements_total&&j(a.node_window,F.class_alone),c.onSet&&c.onSet(that),b.is_active=!0,a.is_set=!0}},la=function(a,b,c){if(b.is_active){c.onUnset&&c.onUnset(that);var d=b.type||c.type;b.is_error?(k(a.node_window,F.class_error),k(a.node_title,F.class_disabled)):(k(a.node_window,F.class_type+"_"+d),"find"===d?(r(b.source,b.content),q(b.source)):"image"===d&&a.node_wrapper&&(a.node_wrapper.style.maxWidth="",a.node_wrapper.style.maxHeight=""),b.title?s(a.node_title):k(a.node_title,F.class_disabled)),s(a.node_content),s(a.node_current),s(a.node_total),1===a.elements_total&&k(a.node_window,F.class_alone),b.is_active=!1,a.is_set=!1}},ma=function(){var a=this,b=arguments;if(!(a instanceof ma))return new ma("FLAG_RECREATE",b);if(b[0]&&"FLAG_RECREATE"===b[0]&&(b=b[1]),a.stack=[],!b.length)return a;for(var c=[],d={},g=[],h=0,j=Math.min(4,b.length);j>h;h++)b[h]&&(f(b[h])?c=b[h]:b[h]instanceof Node||b[h][0]instanceof Node?g=i(b[h]):e(b[h])&&(d=b[h]));var k=N(d.mod,d);k.group="c_"+w(k.group),k.makeLocalWait=k.makeTail?!1:k.makeLocalWait;var l=aa(c,g,k),m={},n="";if(k.makeGrouping)for(var o=0,p=l.length;p>o;o++)n=l[o].group||k.group,m[n]||(m[n]=[]),m[n].push(l[o].id);else{m[k.group]=[];for(var o=0,p=l.length;p>o;o++)m[k.group].push(l[o].id)}var q;for(n in m)m.hasOwnProperty(n)&&(q=ca({group:n,elements:m[n],elements_total:m[n].length,options:k}),a.stack.push(q.id));return a.init(),k.makeEventBind&&a.bind(),a};ma.prototype.get=function(a){var b=this;return b.stack.length<2?b:(a=C(b.stack,a),ma.create(a))},ma.prototype.each=function(a,b){var c=this;if(g(a))for(var d=0,e=c.stack.length;e>d;d++)a.apply(c.get(d),b);return c},ma.prototype.info=function(){var a=this;return 1!==a.stack.length?a.each(a.info,arguments):da(a.stack[0])},ma.prototype.init=function(){var a=this;if(1!==a.stack.length)return a.each(a.init,arguments);var b=da(a.stack[0]),c=b.options,d=Z(b.elements);ea(b,c);for(var e=0,f=b.elements_total;f>e;e++)d[e].node&&(d[e].node.setAttribute(F.attr_id,d[e].id),d[e].node.setAttribute(F.attr_window,b.id)),c.makeTypeDetect&&$(d[e],c.type);return b.element_current=b.elements[b.element_current_index],b.element_pre=b.elements[b.element_pre_index],b.is_init=!0,c.onInit&&c.onInit(a),a},ma.prototype.bind=function(){var a=this;if(1!==a.stack.length)return a.each(a.bind,arguments);var b=da(a.stack[0]),c=b.options,d=Z(b.elements);b.is_bind||(b.bind_click=function(b){c.makePrevent&&b.preventDefault();var d=b.target;return l(d,F.sel_shut)?void a.close():void E(d,[F.sel_close,F.sel_prev,F.sel_next,F.sel_accept,F.sel_cancel],F.sel_window,function(b,d,e){if(b)switch(e){case F.sel_close:a.close();break;case F.sel_prev:a.prev();break;case F.sel_next:a.next();break;case F.sel_accept:c.onAccept&&c.onAccept();break;case F.sel_cancel:c.onCancel&&c.onCancel()}})},b.bind_open=function(b){c.makePrevent&&b.preventDefault();var d=this.getAttribute(F.attr_id);a.open().load(d)},m(b.node_window,F.event_click,b.bind_click));for(var e=0,f=b.elements_total;f>e;e++)!d[e].is_bind&&d[e].node&&(m(d[e].node,F.event_click,b.bind_open),d[e].is_bind=!0);return b.is_bind=!0,a},ma.prototype.unbind=function(){var a=this;if(1!==a.stack.length)return a.each(a.unbind,arguments);var b=da(a.stack[0]),c=(b.options,Z(b.elements));if(b.is_bind){n(b.node_window,F.event_click,b.bind_click);for(var d=0,e=b.elements_total;e>d;d++)c[d].is_bind&&c[d].node&&(n(c[d].node,F.event_click,b.bind_open),c[d].is_bind=!1);b.is_bind=!1}return a},ma.prototype.open=function(){var a=this;if(1!==a.stack.length)return a.each(a.open,arguments);var b=da(a.stack[0]),c=b.options;return b.is_open?a.show():(b.is_enabled&&(b.is_init||a.init(),c.makeTail&&Q&&Q!==b.id&&ma.create(Q).hide(),ga(b,c),a.load()),a)},ma.prototype.close=function(){var a=this;if(1!==a.stack.length)return a.each(a.close,arguments);var b=da(a.stack[0]),c=b.options;return b.is_enabled&&(ha(b,c),c.makeTail&&Q&&Q!==b.id&&ma.create(Q).show(),a.unset()),a},ma.prototype.show=function(){var a=this;if(1!==a.stack.length)return a.each(a.show,arguments);var b=da(a.stack[0]),c=b.options;return b.is_enabled&&(c.makeTail&&Q&&Q!==b.id&&ma.create(Q).hide(),ia(b,c)),a},ma.prototype.hide=function(){var a=this;if(1!==a.stack.length)return a.each(a.hide,arguments);var b=da(a.stack[0]),c=b.options;return b.is_enabled&&ja(b,c),a},ma.prototype.load=function(a){var b=this;if(1!==b.stack.length)return b.each(b.load,arguments);var c=da(b.stack[0]),d=c.options;a=C(c.elements,a)||c.elements[0];var e=Z(a);return c.is_enabled&&!e.is_loading&&!e.is_active&&a&&(c.is_loading&&Z(c.element_pre).source.cancel(),c.element_pre=a,c.element_pre_index=c.elements.indexOf(a),j(c.node_window,F.class_load),c.is_loading=!0,_(e,d,function(a){"abort"!==a&&(k(c.node_window,F.class_load),c.is_loading=!1,b.set())})),b},ma.prototype.abort=function(){var a=this;if(1!==a.stack.length)return a.each(a.abort,arguments);var b=da(a.stack[0]),c=(b.options,Z(b.element_pre));return c.is_loading&&c.source.cancel(),a},ma.prototype.prev=function(){var a=this;if(1!==a.stack.length)return a.each(a.prev,arguments);var b=da(a.stack[0]),c=b.options,d=b.element_pre_index-1;return b.is_enabled&&(0>d&&(d=c.makeLoop?b.elements_total-1:0),a.load(d)),a},ma.prototype.next=function(){var a=this;if(1!==a.stack.length)return a.each(a.next,arguments);var b=da(a.stack[0]),c=b.options,d=b.element_pre_index+1;return b.is_enabled&&(d>=b.elements_total&&(d=c.makeLoop?0:b.elements_total-1),a.load(d)),a},ma.prototype.set=function(a){var b=this;if(1!==b.stack.length)return b.each(b.set,arguments);var c=da(b.stack[0]),d=c.options;a=C(c.elements,a)||c.element_pre;var e=Z(a);return c.is_enabled&&e.is_active&&(c.is_set&&b.unset(),c.element_current=a,c.element_current_index=c.elements.indexOf(a),c.is_first=0===c.element_current_index,c.is_last=c.element_current_index===c.elements_total-1,ka(c,e,d),fa(c,d)),b},ma.prototype.unset=function(a){var b=this;if(1!==b.stack.length)return b.each(b.unset,arguments);var c=da(b.stack[0]),d=c.options;a=C(c.elements,a)||c.element_current;var e=Z(a);return c.is_enabled&&e.is_active&&la(c,e,d),b},ma.prototype.enabled=function(){var a=this;if(1!==a.stack.length)return a.each(a.enabled,arguments);var b=da(a.stack[0]);return b.is_enabled=!0,a},ma.prototype.disabled=function(){var a=this;if(1!==a.stack.length)return a.each(a.disabled,arguments);var b=da(a.stack[0]);return b.is_enabled=!1,a},ma.prototype.update=function(){var a=this;if(1!==a.stack.length)return a.each(a.update,arguments);var b=da(a.stack[0]);b.options;return b.elements_total=b.elements.length,b.element_current_index=b.elements.indexOf(b.element_current),b.element_pre_index=b.elements.indexOf(b.element_pre),-1===b.element_current_index&&(b.element_current="",b.element_current_index=0),-1===b.element_pre_index&&(b.element_pre="",b.element_pre_index=0),b.is_first=0===b.element_current_index,b.is_last=b.element_current_index===b.elements_total-1,b.is_active&&a.load(),a},ma.prototype.destory=function(){var a=this;if(1!==a.stack.length)return a.each(a.destory,arguments);for(var b=da(a.stack[0]),c=b.options,d=Z(b.elements),e=0,f=b.elements_total;f>e;e++)d[e].node&&(d[e].node.removeAttribute(F.attr_id),d[e].node.removeAttribute(F.attr_window));return c.makeEventBind&&a.unbind(),Y(b.elements),b.elements=[],a.update(),a},ma.prototype.addElements=function(a,b,c){var d=this;if(1!==d.stack.length)return d.each(d.addElement,arguments);for(var e=da(d.stack[0]),f=e.options,g=aa(i(b),i(a),f),h=0,j=g.length;j>h;h++)g[h].node&&(g[h].node.setAttribute(F.attr_id,g[h].id),g[h].node.setAttribute(F.attr_window,e.id)),f.makeTypeDetect&&$(g[h],f.type);var k="";switch(c){case"before":for(var l=g.length-1,m=0;l>=m;l--)k=g[l].group||e.group,(!f.makeGrouping||f.makeGrouping&&k===e.group)&&e.elements.unshift(g[l].id);break;case"after":default:for(var l=0,m=g.length;m>l;l++)k=g[l].group||e.group,(!f.makeGrouping||f.makeGrouping&&k===e.group)&&e.elements.push(g[l].id)}return d.update(),f.makeEventBind&&d.bind(),d},ma.info=function(){return a.name+" v"+a.version+" by "+a.author},ma.create=function(a){var b=new ma;return f(a)&&a.length?b.stack=a:"string"==typeof a&&ba[a]&&(b.stack=[a]),b},ma.addMod=function(a,b){return M(a,b)},ma.getMod=function(a){return N(a)},ma.getModList=function(){return O()},ma.addText=function(a,b){return H(a,b)},ma.getText=function(a){return I(a)},ma.getTextList=function(){return K()},ma.getTail=function(){return ma.create(T())},window.Leafage=ma}();
//# sourceMappingURL=leafage.map