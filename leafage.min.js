/*\
 *  leafage v0.0.3 by A.S. https://github.com/asgirl/leafage
\*/

!function(){"use strict";function a(a){return a&&Object.prototype.toString.call(a)===Object.prototype.toString.call({})}function b(a){return a&&Object.prototype.toString.call(a)===Object.prototype.toString.call([])}function c(a){return a&&Object.prototype.toString.call(a)===Object.prototype.toString.call(function(){})}function d(){var b=arguments,c={};if(!b.length)return c;for(var e=0;e<b.length;e++)if(a(b[e]))for(var f in b[e])b[e].hasOwnProperty(f)&&(a(b[e][f])?c[f]=d(c[f]||{},b[e][f]):c[f]=b[e][f]);return c}function e(a){var b=!a||0===a.length,c=!b&&!a.length,d=[];if(b)return[];if(c)return[a];for(var e=0,f=a.length;f>e;e++)d.push(a[e]);return d}function f(a,c){if(a&&0!==a.length&&c&&0!==c.length){b(a)||(a=[a]),b(c)||(c=c.split(" "));for(var d="",e=0,f=a.length;f>e;e++){d=a[e].className.split(" ")||[];for(var g=0,h=c.length;h>g;g++)-1===d.indexOf(c[g])&&d.push(c[g]);a[e].className=d.join(" ")}}}function g(a,c){if(a&&0!==a.length&&c&&0!==c.length){b(a)||(a=[a]),b(c)||(c=c.split(" "));for(var d="",e=[],f=0,g=a.length;g>f;f++){d=a[f].className.split(" ")||[];for(var h=0,i=d.length;i>h;h++)-1===c.indexOf(d[h])&&e.push(d[h]);a[f].className=e.join(" ")}}}function h(a,c){if(!a||a.length||!c||0===c.length)return!1;b(c)||(c=c.split(" "));for(var d=a.className.split(" ")||[],e=0,f=c.length;f>e;e++)if(-1===d.indexOf(c[e]))return!1;return!!c.length}function i(a,c,d){if(a&&0!==a.length&&c&&0!==c.length&&d){b(a)||(a=[a]),b(c)||(c=c.split(" "));for(var e=window.addEventListener?1:2,f=0,g=a.length;g>f;f++)for(var h=0,i=c.length;i>h;h++)1===e?a[f].addEventListener(c[h],d,!1):a[f].attachEvent("on"+c[h],d)}}function j(a,c,d){if(a&&0!==a.length&&c&&0!==c.length&&d){b(a)||(a=[a]),b(c)||(c=c.split(" "));for(var e=window.addEventListener?1:2,f=0,g=a.length;g>f;f++)for(var h=0,i=c.length;i>h;h++)1===e?a[f].removeEventListener(c[h],d):a[f].detachEvent("on"+c[h],d)}}function k(a){a=a||{};var b=new XMLHttpRequest;return b.open(a.method||"get",a.url,a.async||!0,a.username,a.userpass),b}function l(a,c){if(a&&0!==a.length&&c&&0!==c.length){b(a)||(a=[a]),c instanceof Node&&(c=[c]);for(var d=0,e=a.length;e>d;d++)if(b(c))for(var f=0,g=c.length;g>f;f++)a[d].appendChild(c[f]);else a[d].insertAdjacentHTML("beforeend",c)}}function m(a){if(a&&0!==a.length){b(a)||(a=[a]);for(var c=0,d=a.length;d>c;c++)a[c].parentNode.removeChild(a[c])}}function n(a,c){if(a&&0!==a.length&&c&&0!==c.length){b(a)||(a=[a]),c instanceof Node&&(c=[c]);for(var d=0,e=a.length;e>d;d++)if(b(c))for(var f=0,g=c.length;g>f;f++)a[d].parentNode.insertBefore(c[f],a[d]);else a[d].insertAdjacentHTML("beforebegin",c)}}function o(a){if(a&&0!==a.length){b(a)||(a=[a]);for(var c=[],d=0,e=a.length;e>d;d++){c=a[d].childNodes;for(var f=0,g=c.length;g>f;f++)c[f]&&a[d].removeChild(c[f])}}}function p(a){return a?da.querySelector(a):null}function q(a,b){return a&&0!==a.length&&b?a.querySelector(b):null}function r(a,b){return a&&0!==a.length&&b?e(a.querySelectorAll(b)):null}function s(a){return a.replace(/[^a-z0-9_\-\.]+/gi,"").replace(/[\-\.]/g,"_")}function t(a){var b="abcdefghijklmnopqrstuvwxyz",c=b.length-1,d="";if(!a)return d;for(var e=0;a>e;e++)d+=b[Math.round(Math.random()*c)];return-1!==ga.indexOf(d)?t(a):(ga.push(d),d)}function u(a){var b=da.createDocumentFragment(),c=da.createElement("div");c.innerHTML=a;for(var d=r(c,"script"),e=0,f=d.length;f>e;e++)n(d[e],w(d[e]));for(var g=c.childNodes,h=0,i=g.length;i>h;h++)b.appendChild(g[h]);return b}function v(a){var b=da.createElement("div");b.innerHTML=a;for(var c=r(b,"script"),d=0,f=c.length;f>d;d++)n(c[d],w(c[d]));return e(b.childNodes)}function w(a){if("script"!==a.nodeName.toLowerCase())return a;var b,c;b=document.createElement("script"),b.innerHTML=a.innerHTML,c=a.attributes;for(var d=0,e=c.length;e>d;d++)b.setAttribute(c[d].nodeName,c[d].nodeValue);return b}function x(a,b){return a.length?-1!==a.indexOf(b)?b:b="first"===b?a[0]:"last"===b?a[a.length-1]:"number"==typeof b&&b>=0&&b<a.length?a[b]:void 0:void 0}function y(a,b,c,d){var e,f=function(){j(e,"load",g),j(e,"error",h)},g=function(a){return e.status&&200!==e.status?h():(f(),void(d&&d("success",e,Date.now())))},h=function(a){f(),d&&d("error",a)},l=function(){};switch(b){case"ajax":l=function(a){f(),e.abort(),e=null,d&&d("abort")},c.url=a,e=k(c),i(e,"load",g),i(e,"error",h),e.send();break;case"image":l=function(a){f(),e.src="",e=null,d&&d("abort")},e=document.createElement("img"),i(e,"load",g),i(e,"error",h),e.src=a;break;default:return d&&d("success",null,Date.now()),null}return e.cancel=l,e}function z(a,c,d,e){if(a&&c&&0!==c.length){b(c)||(c=[c]);for(var f=0;1>f;f++){for(var g=0,i=c.length;i>g;g++)if(h(a,c[g]))return e(!0,a,c[g]);if(h(a,d))return e(!1,a,d);if(!a.parentNode)return e(!1,a);a=a.parentNode,f--}}}function A(){fa=da.body,ha=!0;var a=document.createElement("div");a.style.position="absolute",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",l(fa,a);var b=parseInt(a.offsetWidth)-parseInt(a.clientWidth);m(a);var c=document.createElement("style");c.type="text/css",c.rel="stylesheet",c.innerHTML=".h-scroll-top{margin-top:"+b+"px;}.h-scroll-left{margin-left:"+b+"px;}.h-scroll-right{margin-right:"+b+"px;}.h-scroll-bottom{margin-bottom:"+b+"px;}",l(document.getElementsByTagName("head")[0],c)}function B(a,b){return a&&"general"!==a?(a="c_"+s(a),ja[a]=d(ja.general,b),ja[a]):null}function C(a){return a&&"general"!==a&&(a="c_"+s(a)),ja[a]?ja[a]:null}function D(a,b){return"general"!==a&&(a="c_"+s(a)),ja[a]||(a="general"),ja[a][b]}function E(){var a=[];for(var b in ja)a.push("general"!==b?b.slice(2):b);return a}function F(a,b){return"general"===a?!1:(a="c_"+s(a),ka[a]=d({},b),ka[a])}function G(a,b){return b=b||{},a&&"general"!==a&&(a="c_"+s(a)),a&&"general"!==a?d(ka.general,ka[a],b):d(ka.general,b)}function H(){var a=[];for(var b in ka)a.push("general"!==b?b.slice(2):b);return a}function I(a){return ma=a,la.push(a),!0}function J(a){for(var b=[],c=0,d=la.length;d>c;c++)a!==la[c]&&b.push(la[c]);return la=b,ma=la.length?la[la.length-1]:"",!0}function K(){return la}function L(a){return a.id=t(16),pa[a.id]=d(oa,a),pa[a.id]}function M(a){if(b(a))for(var c=0,d=a.length;d>c;c++)pa[a[c]]=null;else pa[a]=null}function N(a){var c=[];if(b(a)){for(var d=0,e=a.length;e>d;d++)c.push(pa[a[d]]);return c}return pa[a]}function O(a,b){if(a.url)if(/^(http(s)?\:)?\/\/(www\.)?(youtu\.be)/i.test(a.url))a.url="//www.youtube.com/embed/"+a.url.match(/([^\/]*)$/)[0],"iframe"!==b&&(a.type="iframe");else if(/^(http(s)?\:)?\/\/(www\.)?(vimeo\.com)/i.test(a.url))a.url="//player.vimeo.com/video/"+a.url.match(/([^\/]*)$/)[0],"iframe"!==b&&(a.type="iframe");else{if(a.type)return;a.content?"html"!==b&&(a.type="html"):/^\w*\#/.test(a.url)?"find"!==b&&(a.type="find"):/\.(bmp|gif|jp(e)?g|png|svg|tif(f)?|webp)(?:\?.*)?$/i.test(a.url)?"image"!==b&&(a.type="image"):/\.(3gp|mp3|mp4|og(g|v)|pdf|wav|webm|wmv)(?:\?.*)?$/i.test(a.url)?"iframe"!==b&&(a.type="iframe"):("find"===b||"html"===b)&&(a.type="ajax")}}function P(a,b,c){var d=a.type||b.type;if(!a.is_get||a.timestamp&&Date.now()-a.timestamp>b.timeSave)switch(a.is_get=!1,a.is_error=!1,d){case"ajax":case"image":return a.is_loading=!0,void(a.source=y(a.url+(b.makeCasheReset?(/(\?.*)$/.test(a.url)?"&":"?")+Date.now():""),d,b.ajaxProperty,function(e,f,g){"success"===e?("ajax"===d?a.content=v(f.responseText):a.content=a.source,a.timestamp=g,a.is_get=!0):"error"===e&&(a.content=D(b.lang,"error"),a.is_error=!0),a.is_loading=!1,c&&c(e)}));case"find":a.content=document.getElementById(a.url.slice(1)),a.source=document.createElement("div"),a.content?a.is_get=!0:(a.content=D(b.lang,"error"),a.is_error=!0);break;case"iframe":a.content=document.createElement("iframe"),a.content.src=a.url,a.content.setAttribute("allowfullscreen",!0),a.is_get=!0;break;case"html":"string"==typeof a.content?a.content=v(a.content):a.content=e(a.content),a.is_get=!0}c&&c(a.is_error?"error":"success")}function Q(a,b,c){for(var d,e={},f=[],g=0,h=Math.max(a.length,b.length);h>g;g++){if(b[g]&&(b[g].hasAttribute(c.urlAttr)&&(e.url=b[g].getAttribute(c.urlAttr)),b[g].hasAttribute(c.titleAttr)&&(e.title=b[g].getAttribute(c.titleAttr)),b[g].hasAttribute(c.typeAttr)&&(e.type=b[g].getAttribute(c.typeAttr)),b[g].hasAttribute(c.groupAttr)&&(e.group=b[g].getAttribute(c.groupAttr)),e.node=b[g]),a[g]&&(a[g].url&&(e.url=a[g].url),a[g].title&&(e.title=a[g].title),a[g].content&&(e.content=a[g].content),a[g].type&&(e.type=a[g].type),a[g].group&&(e.group=a[g].group)),e.url&&(e.url=e.url.replace(/(^\s+)|(\s+$)/g,"")),e.group&&(e.group="c_"+s(e.group)),c.makeMultiUrl&&e.url){d=e.url.split(","),delete e.content;for(var i=0,j=d.length;j>i;i++)e.url=d[i].replace(/(^\s+)|(\s+$)/g,""),f.push(L(e)),i||delete e.node}else f.push(L(e));e={}}return f}function R(a){return a=a||{},a.id=t(8),qa[a.id]=d(ca,a),qa[a.id]}function S(a){return qa[a]}function T(a,b){var c=b.template.replace(/\{\{\s?(\w+)\s?\}\}/g,function(a,c){var d=D(b.lang,c);return d?d:""}),d=u(c);a.node_window=q(d,"."+ia.sel_window),a.node_wrapper=q(d,"."+ia.sel_wrapper),a.node_title=q(d,"."+ia.sel_title),a.node_content=q(d,"."+ia.sel_content),a.node_prev=r(d,"."+ia.sel_prev),a.node_next=r(d,"."+ia.sel_next),a.node_current=r(d,"."+ia.sel_current),a.node_total=r(d,"."+ia.sel_total),b.bindto instanceof Node?a.node_place=b.bindto:a.node_place=p(b.bindto),b.makeCombine||(a.node_prev&&m(a.node_prev),a.node_next&&m(a.node_next)),f(a.node_window,b.classWindow)}function U(a,b){b.makeLoop||(a.is_first?f(a.node_prev,ia.class_disabled):g(a.node_prev,ia.class_disabled),a.is_last?f(a.node_next,ia.class_disabled):g(a.node_next,ia.class_disabled))}function V(a,b){a.is_open||(b.makeTail&&I(a.id),b.makeBlockPage&&(na||f(ea,ia.class_block),na++),l(a.node_place,a.node_window),f(a.node_window,ia.class_active),f(ea,b.classBody),b.onOpen&&b.onOpen(that),a.is_active=!0,a.is_open=!0)}function W(a,b){a.is_open&&(b.onClose&&b.onClose(that),b.makeTail&&J(a.id),b.makeBlockPage&&a.is_active&&(na--,na||g(ea,ia.class_block)),m(a.node_window),g(a.node_window,ia.class_active),g(ea,b.classBody),a.is_active=!1,a.is_open=!1)}function X(a,b){a.is_active||(b.makeTail&&(ma&&ma!==a.id&&aa.create(ma).hide(),ma=a.id),b.makeBlockPage&&(na||f(ea,ia.class_block),na++),g(a.node_window,ia.class_inactive),f(a.node_window,ia.class_active),a.is_active=!0)}function Y(a,b){a.is_active&&(b.makeTail&&(ma=""),b.makeBlockPage&&(na--,na||g(ea,ia.class_block)),g(a.node_window,ia.class_active),f(a.node_window,ia.class_inactive),a.is_active=!1)}function Z(a,b,c){b.is_active||(b.title?l(a.node_title,b.title):f(a.node_title,ia.class_disabled),l(a.node_current,(a.element_current_index+1).toString()),l(a.node_total,a.elements_total.toString()),1===a.elements_total&&f(a.node_window,ia.class_alone),c.onSet&&c.onSet(that),b.is_active=!0,a.is_set=!0)}function $(a,b,c){if(b.is_active){c.onUnset&&c.onUnset(that);var d=b.type||c.type;b.is_set&&(b.is_error?g(a.node_window,ia.class_error):(g(a.node_window,ia.class_type+"_"+d),"find"===d?(n(b.source,b.content),m(b.source)):"image"===d&&a.node_wrapper&&(a.node_wrapper.style.maxWidth="",a.node_wrapper.style.maxHeight=""))),b.title?o(a.node_title):g(a.node_title,ia.class_disabled),o(a.node_content),o(a.node_current),o(a.node_total),1===a.elements_total&&g(a.node_window,ia.class_alone),b.is_set=!1,b.is_active=!1,a.is_set=!1}}function _(a,b,c){if(!b.is_set){var d=b.type||c.type;b.is_error?f(a.node_window,ia.class_error):(f(a.node_window,ia.class_type+"_"+d),"find"===d?n(b.content,b.source):"image"===d&&a.node_wrapper&&(a.node_wrapper.style.maxWidth=b.content.naturalWidth+"px")),l(a.node_content,b.content),b.is_set=!0}}function aa(){var c=this,d=arguments;if(!(c instanceof aa))return new aa("FLAG_RECREATE",d);if(d[0]&&"FLAG_RECREATE"===d[0]&&(d=d[1]),c.stack=[],!d.length)return c;for(var f=[],g={},h=[],i=0,j=Math.min(4,d.length);j>i;i++)d[i]&&(b(d[i])?f=d[i]:d[i]instanceof Node||d[i][0]instanceof Node?h=e(d[i]):a(d[i])&&(g=d[i]));var k=G(g.mod,g);k.group="c_"+s(k.group),k.makeLocalWait=k.makeTail?!1:k.makeLocalWait;var l=Q(f,h,k),m={},n="";if(k.makeGrouping)for(var o=0,p=l.length;p>o;o++)n=l[o].group||k.group,m[n]||(m[n]=[]),m[n].push(l[o].id);else{m[k.group]=[];for(var o=0,p=l.length;p>o;o++)m[k.group].push(l[o].id)}var q;for(n in m)m.hasOwnProperty(n)&&(q=R({group:n,elements:m[n],elements_total:m[n].length,options:k}),c.stack.push(q.id));return c.init(),k.makeEventBind&&c.bind(),ha||A(),c}var ba={author:"A.S.",name:"Leafage",version:"0.0.3",license:"MIT",repository:"https://github.com/asgirl/leafage"},ca=window,da=document,ea=document.documentElement,fa=document.body,ga=[],ha=!1,ia={prefix:"leafage",attr_window:"data-leafage-window",attr_id:"data-leafage-id",attr_url:"data-leafage-url",attr_title:"data-leafage-title",attr_content:"data-leafage-content",attr_type:"data-leafage-type",attr_group:"data-leafage-group",sel_window:"e-window",sel_wrapper:"e-wrapper",sel_title:"e-title",sel_content:"e-content",sel_shut:"e-shut",sel_close:"e-close",sel_prev:"e-prev",sel_next:"e-next",sel_touch:"e-touch",sel_accept:"e-accept",sel_cancel:"e-cancel",sel_current:"e-current",sel_total:"e-total",class_block:"f-pageblock",class_alone:"f-alone",class_enabled:"f-enabled",class_disabled:"f-disabled",class_active:"f-active",class_inactive:"f-inactive",class_open:"f-open",class_close:"f-close",class_show:"f-show",class_hide:"f-hide",class_prev:"f-prev",class_next:"f-next",class_ready:"f-ready",class_load:"f-loading",class_error:"f-error",class_type:"f-type",event_click:"click"},ja={general:{success:"Everything okay",error:"Something wrong",txt_prev:"Prev",txt_next:"Next",txt_close:"Close"}},ka={general:{mod:"general",lang:"general",bindto:"body",makeMultiUrl:!0,makeTypeDetect:!0,makeGrouping:!0,makeCombine:!0,makeBlockPage:!0,makeTail:!0,makeLoop:!1,makeCasheReset:!1,makeEventBind:!0,makePrevent:!0,classBody:"",classWindow:"",urlAttr:ia.attr_url,titleAttr:ia.attr_title,contentAttr:ia.attr_content,type:"ajax",typeAttr:ia.attr_type,group:"g",groupAttr:ia.attr_group,ajaxProperty:{},timeSave:6e4,template:'<div class="leafage e-window e-shut"><button class="leafage-prev e-prev" title="{{txt_prev}}"></button><button class="leafage-next e-next h-scroll-right" title="{{txt_next}}"></button><div class="leafage-wrapper e-wrapper"><div class="leafage-content e-content"></div></div><div class="leafage-info"><button class="leafage-close e-close" title="{{txt_close}}"></button><div class="leafage-count"><span class="e-current"></span> / <span class="e-total"></span></div><div class="leafage-title e-title"></div></div><div class="leafage-preloader"></div></div>',onInit:null,onOpen:null,onClose:null,onSet:null,onUnset:null,onAccept:null,onCancel:null}},la=[],ma="",na=0,oa={id:"",is_get:!1,is_error:!1,is_set:!1,is_active:!1,is_loading:!1,is_bind:!1,timestamp:0,url:"",title:"",content:"",type:"",group:"",node:null,source:null},pa={},ca={id:"",is_enabled:!0,is_init:!1,is_bind:!1,is_open:!1,is_ready:!1,is_active:!1,is_loading:!1,is_set:!1,is_first:!1,is_last:!1,group:"",elements:[],elements_total:0,element_current:"",element_current_index:0,element_pre:"",element_pre_index:0,options:{}},qa={};aa.prototype.get=function(a){var b=this;return b.stack.length<2?b:(a=x(b.stack,a),aa.create(a))},aa.prototype.each=function(a,b){var d=this;if(c(a))for(var e=0,f=d.stack.length;f>e;e++)a.apply(d.get(e),b);return d},aa.prototype.info=function(){var a=this;return 1!==a.stack.length?a.each(a.info,arguments):S(a.stack[0])},aa.prototype.init=function(){var a=this;if(1!==a.stack.length)return a.each(a.init,arguments);var b=S(a.stack[0]),c=b.options,d=N(b.elements);T(b,c);for(var e=0,f=b.elements_total;f>e;e++)d[e].node&&(d[e].node.setAttribute(ia.attr_id,d[e].id),d[e].node.setAttribute(ia.attr_window,b.id)),c.makeTypeDetect&&O(d[e],c.type);return b.element_current=b.elements[b.element_current_index],b.element_pre=b.elements[b.element_pre_index],b.is_init=!0,c.onInit&&c.onInit(a),a},aa.prototype.bind=function(){var a=this;if(1!==a.stack.length)return a.each(a.bind,arguments);var b=S(a.stack[0]),c=b.options,d=N(b.elements);b.is_bind||(b.bind_click=function(b){c.makePrevent&&b.preventDefault();var d=b.target;return h(d,ia.sel_shut)?void a.close():void z(d,[ia.sel_close,ia.sel_prev,ia.sel_next,ia.sel_accept,ia.sel_cancel],ia.sel_window,function(b,d,e){if(b)switch(e){case ia.sel_close:a.close();break;case ia.sel_prev:a.prev();break;case ia.sel_next:a.next();break;case ia.sel_accept:c.onAccept&&c.onAccept();break;case ia.sel_cancel:c.onCancel&&c.onCancel()}})},b.bind_open=function(b){c.makePrevent&&b.preventDefault();var d=this.getAttribute(ia.attr_id);a.open(d)},i(b.node_window,ia.event_click,b.bind_click));for(var e=0,f=b.elements_total;f>e;e++)!d[e].is_bind&&d[e].node&&(i(d[e].node,ia.event_click,b.bind_open),d[e].is_bind=!0);return b.is_bind=!0,a},aa.prototype.unbind=function(){var a=this;if(1!==a.stack.length)return a.each(a.unbind,arguments);var b=S(a.stack[0]),c=(b.options,N(b.elements));if(b.is_bind){j(b.node_window,ia.event_click,b.bind_click);for(var d=0,e=b.elements_total;e>d;d++)c[d].is_bind&&c[d].node&&(j(c[d].node,ia.event_click,b.bind_open),c[d].is_bind=!1);b.is_bind=!1}return a},aa.prototype.open=function(a){var b=this;if(1!==b.stack.length)return b.each(b.open,arguments);var c=S(b.stack[0]),d=c.options;return c.is_open?b.show():(c.is_enabled&&(c.is_init||b.init(),d.makeTail&&ma&&ma!==c.id&&aa.create(ma).hide(),V(c,d),b.load(a)),b)},aa.prototype.close=function(){var a=this;if(1!==a.stack.length)return a.each(a.close,arguments);var b=S(a.stack[0]),c=b.options;return b.is_enabled&&(W(b,c),c.makeTail&&ma&&ma!==b.id&&aa.create(ma).show(),a.unset()),a},aa.prototype.show=function(){var a=this;if(1!==a.stack.length)return a.each(a.show,arguments);var b=S(a.stack[0]),c=b.options;return b.is_enabled&&(c.makeTail&&ma&&ma!==b.id&&aa.create(ma).hide(),X(b,c)),a},aa.prototype.hide=function(){var a=this;if(1!==a.stack.length)return a.each(a.hide,arguments);var b=S(a.stack[0]),c=b.options;return b.is_enabled&&Y(b,c),a},aa.prototype.load=function(a){var b=this;if(1!==b.stack.length)return b.each(b.load,arguments);var c=S(b.stack[0]),d=c.options;a=x(c.elements,a)||c.elements[0];var e=N(a);return c.is_enabled&&!e.is_loading&&!e.is_active&&a&&(c.is_loading&&N(c.element_pre).source.cancel(),c.element_pre=a,c.element_pre_index=c.elements.indexOf(a),b.set(),f(c.node_window,ia.class_load),c.is_loading=!0,P(e,d,function(a){g(c.node_window,ia.class_load),c.is_loading=!1,"abort"!==a&&_(c,e,d)})),b},aa.prototype.abort=function(){var a=this;if(1!==a.stack.length)return a.each(a.abort,arguments);var b=S(a.stack[0]),c=(b.options,N(b.element_pre));return c.is_loading&&c.source.cancel(),a},aa.prototype.prev=function(){var a=this;if(1!==a.stack.length)return a.each(a.prev,arguments);var b=S(a.stack[0]),c=b.options,d=b.element_pre_index-1;return b.is_enabled&&(0>d&&(d=c.makeLoop?b.elements_total-1:0),a.load(d)),a},aa.prototype.next=function(){var a=this;if(1!==a.stack.length)return a.each(a.next,arguments);var b=S(a.stack[0]),c=b.options,d=b.element_pre_index+1;return b.is_enabled&&(d>=b.elements_total&&(d=c.makeLoop?0:b.elements_total-1),a.load(d)),a},aa.prototype.set=function(a){var b=this;if(1!==b.stack.length)return b.each(b.set,arguments);var c=S(b.stack[0]),d=c.options;a=x(c.elements,a)||c.element_pre;var e=N(a);return c.is_enabled&&!e.is_active&&a&&(c.is_set&&b.unset(),c.element_current=a,c.element_current_index=c.elements.indexOf(a),c.is_first=0===c.element_current_index,c.is_last=c.element_current_index===c.elements_total-1,Z(c,e,d),U(c,d)),b},aa.prototype.unset=function(a){var b=this;if(1!==b.stack.length)return b.each(b.unset,arguments);var c=S(b.stack[0]),d=c.options;a=x(c.elements,a)||c.element_current;var e=N(a);return c.is_enabled&&e.is_active&&$(c,e,d),b},aa.prototype.enabled=function(){var a=this;if(1!==a.stack.length)return a.each(a.enabled,arguments);var b=S(a.stack[0]);return b.is_enabled=!0,a},aa.prototype.disabled=function(){var a=this;if(1!==a.stack.length)return a.each(a.disabled,arguments);var b=S(a.stack[0]);return b.is_enabled=!1,a},aa.prototype.update=function(){var a=this;if(1!==a.stack.length)return a.each(a.update,arguments);var b=S(a.stack[0]);b.options;return b.elements_total=b.elements.length,b.element_current_index=b.elements.indexOf(b.element_current),b.element_pre_index=b.elements.indexOf(b.element_pre),-1===b.element_current_index&&(b.element_current="",b.element_current_index=0),-1===b.element_pre_index&&(b.element_pre="",b.element_pre_index=0),b.is_first=0===b.element_current_index,b.is_last=b.element_current_index===b.elements_total-1,b.is_active&&a.load(),a},aa.prototype.destory=function(){var a=this;if(1!==a.stack.length)return a.each(a.destory,arguments);for(var b=S(a.stack[0]),c=b.options,d=N(b.elements),e=0,f=b.elements_total;f>e;e++)d[e].node&&(d[e].node.removeAttribute(ia.attr_id),d[e].node.removeAttribute(ia.attr_window));return c.makeEventBind&&a.unbind(),M(b.elements),b.elements=[],a.update(),a},aa.prototype.addElements=function(a,b,c){var d=this;if(1!==d.stack.length)return d.each(d.addElement,arguments);for(var f=S(d.stack[0]),g=f.options,h=Q(e(b),e(a),g),i=0,j=h.length;j>i;i++)h[i].node&&(h[i].node.setAttribute(ia.attr_id,h[i].id),h[i].node.setAttribute(ia.attr_window,f.id)),g.makeTypeDetect&&O(h[i],g.type);var k="";switch(c){case"before":for(var l=h.length-1,m=0;l>=m;l--)k=h[l].group||f.group,(!g.makeGrouping||g.makeGrouping&&k===f.group)&&f.elements.unshift(h[l].id);break;case"after":default:for(var l=0,m=h.length;m>l;l++)k=h[l].group||f.group,(!g.makeGrouping||g.makeGrouping&&k===f.group)&&f.elements.push(h[l].id)}return d.update(),g.makeEventBind&&d.bind(),d},aa.info=function(){return ba.name+" v"+ba.version+" by "+ba.author},aa.create=function(a){var c=new aa;return b(a)&&a.length?c.stack=a:"string"==typeof a&&qa[a]&&(c.stack=[a]),c},aa.addMod=function(a,b){return F(a,b)},aa.getMod=function(a){return G(a)},aa.getModList=function(){return H()},aa.addText=function(a,b){return B(a,b)},aa.getText=function(a){return C(a)},aa.getTextList=function(){return E()},aa.getTail=function(){return aa.create(K())},window.Leafage=aa}();
//# sourceMappingURL=leafage.map